/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

var InlineType;
(function (InlineType) {
    InlineType["text"] = "text";
    InlineType["code"] = "code";
    InlineType["formula"] = "formula";
    InlineType["link"] = "link";
    InlineType["user"] = "user-defined";
    InlineType["none"] = "none";
})(InlineType || (InlineType = {}));
var LineType;
(function (LineType) {
    LineType["text"] = "text";
    LineType["code"] = "code";
    LineType["formula"] = "formula";
    LineType["frontmatter"] = "frontmatter";
    LineType["none"] = "none";
})(LineType || (LineType = {}));
const DEFAULT_SETTINGS = {
    AutoFormatting: true,
    ChineseEnglishSpace: true,
    ChineseNoSpace: true,
    EnglishSpace: true,
    Capitalization: true,
    BraceSpace: true,
    NumberSpace: true,
    InlineCodeSpace: true,
    InlineFormulaSpace: true,
    LinkSpace: true,
    FullWidthCharacterEnhence: true,
    UserDefinedRegExp: ':\\w*:\n{{.*?}}',
    UserDefinedRegSwitch: true,
    UserPartSpace: true,
    Debug: false
};
function getLineTypeFromArticleParts(line, typeArray) {
    for (let i = 0; i < typeArray.length; i++) {
        if (line >= typeArray[i].begin && line < typeArray[i].end) {
            return typeArray[i].type;
        }
    }
}
function splitArticle(article) {
    let retArray = [];
    let lines = article.split('\n');
    let regNullLine = /^\s*$/;
    let regFormulaBegin = /^\s*(\- (\[[x ]\] )?)?\$\$/;
    let regFormulaEnd = /\$\$$/;
    let regCodeBegin = /^\s*```/;
    let regCodeEnd = /^\s*```$/;
    let index = 0;
    // 1. 判断 frontmatter
    let frontMatterPart;
    for (let i = 0; i < lines.length; i++) {
        if (regNullLine.test(lines[i])) {
            continue;
        }
        else if (lines[i] === '---') {
            for (let j = i + 1; j < lines.length; j++) {
                if (lines[j] === '---') {
                    if (i != 0) {
                        retArray.push({
                            type: LineType.text,
                            begin: 0,
                            end: i
                        });
                    }
                    frontMatterPart = {
                        type: LineType.frontmatter,
                        begin: i,
                        end: j + 1
                    };
                    retArray.push(frontMatterPart);
                    index = j + 1;
                    break;
                }
            }
            break;
        }
        else {
            break;
        }
    }
    // console.log('index', index);
    // 2. 遍历行得到 LineType 分区
    while (index < lines.length) {
        if (regCodeBegin.test(lines[index])) {
            let j = index + 1;
            while (j < lines.length) {
                if (regCodeEnd.test(lines[j]))
                    break;
                j++;
            }
            retArray.push({
                type: LineType.code,
                begin: index,
                end: j + 1
            });
            index = j + 1;
        }
        else if (regFormulaBegin.test(lines[index])) {
            let regFormulaOneLine = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
            if (regFormulaOneLine.test(lines[index])) {
                retArray.push({
                    type: LineType.formula,
                    begin: index,
                    end: index + 1
                });
                index += 1;
            }
            else {
                let j = index + 1;
                while (j < lines.length) {
                    if (regFormulaEnd.test(lines[j]))
                        break;
                    j++;
                }
                retArray.push({
                    type: LineType.formula,
                    begin: index,
                    end: j + 1
                });
                index = j + 1;
            }
        }
        else {
            let j = index + 1;
            for (; j < lines.length; j++) {
                if (regCodeBegin.test(lines[j]) || regFormulaBegin.test(lines[j])) {
                    break;
                }
            }
            retArray.push({
                type: LineType.text,
                begin: index,
                end: j
            });
            index = j;
        }
    }
    return retArray;
}
function stringDeleteAt(str, index) {
    return str.substring(0, index) + str.substring(index + 1);
}
function stringInsertAt(str, index, s) {
    return str.substr(0, index) + s + str.substring(index);
}
function splitLine(line, regExps) {
    let regInlineMark = /(?<!\\)\$|(?<!\\)\`/g;
    let regFormulaInline = /(?<!\\)\$(?! )[^]+?(?<! )(?<!\\)\$/g;
    let regFormulaBlock = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
    let regCode = /(?<!\\)`[^]*?(?<!\\)`/g;
    let markQueue = [];
    let arrayOfInlineTextCodeFormula = [];
    while (true) {
        let match = regInlineMark.exec(line);
        if (!match)
            break;
        markQueue.push(match);
    }
    let textBeginIndex = 0;
    while (markQueue.length != 0) {
        let mark = markQueue.shift();
        if (mark.index < textBeginIndex)
            continue;
        if (mark[0] === '$') {
            let matchFormulaBeginIndex;
            let matchFormulaLastIndex;
            regFormulaBlock.lastIndex = mark.index;
            let matchBlockFormula = regFormulaBlock.exec(line);
            if (matchBlockFormula && matchBlockFormula.index === mark.index) {
                matchFormulaBeginIndex = matchBlockFormula.index;
                matchFormulaLastIndex = regFormulaBlock.lastIndex;
            }
            else {
                regFormulaInline.lastIndex = mark.index;
                let matchInlineFormula = regFormulaInline.exec(line);
                if (matchInlineFormula && matchInlineFormula.index === mark.index) {
                    matchFormulaBeginIndex = matchInlineFormula.index;
                    matchFormulaLastIndex = regFormulaInline.lastIndex;
                }
                // 如果没匹配到，则 continue
                else {
                    continue;
                }
            }
            if (mark.index > textBeginIndex) {
                arrayOfInlineTextCodeFormula.push({
                    content: line.substring(textBeginIndex, mark.index),
                    type: InlineType.text,
                    begin: textBeginIndex,
                    end: mark.index
                });
            }
            arrayOfInlineTextCodeFormula.push({
                content: line.substring(matchFormulaBeginIndex, matchFormulaLastIndex),
                type: InlineType.formula,
                begin: matchFormulaBeginIndex,
                end: matchFormulaLastIndex
            });
            textBeginIndex = matchFormulaLastIndex;
            continue;
        }
        else if (mark[0] === '`') {
            let matchCodeBeginIndex;
            let matchCodeLastIndex;
            regCode.lastIndex = mark.index;
            let matchInlineCode = regCode.exec(line);
            if (matchInlineCode && matchInlineCode.index === mark.index) {
                matchCodeBeginIndex = matchInlineCode.index;
                matchCodeLastIndex = regCode.lastIndex;
                if (mark.index > textBeginIndex) {
                    arrayOfInlineTextCodeFormula.push({
                        content: line.substring(textBeginIndex, mark.index),
                        type: InlineType.text,
                        begin: textBeginIndex,
                        end: mark.index
                    });
                }
                arrayOfInlineTextCodeFormula.push({
                    content: line.substring(matchCodeBeginIndex, matchCodeLastIndex),
                    type: InlineType.code,
                    begin: matchCodeBeginIndex,
                    end: matchCodeLastIndex
                });
                textBeginIndex = matchCodeLastIndex;
                continue;
            }
            else {
                continue;
            }
        }
    }
    if (textBeginIndex != line.length) {
        arrayOfInlineTextCodeFormula.push({
            content: line.substring(textBeginIndex),
            type: InlineType.text,
            begin: textBeginIndex,
            end: line.length
        });
    }
    // =======================================
    let retArray = [];
    for (let i = 0; i < arrayOfInlineTextCodeFormula.length; i++) {
        if (arrayOfInlineTextCodeFormula[i].type != InlineType.text) {
            retArray.push(arrayOfInlineTextCodeFormula[i]);
        }
        else {
            let tempArray;
            if (regExps)
                tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content, regExps);
            else
                tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content);
            tempArray.forEach(item => {
                item.begin += arrayOfInlineTextCodeFormula[i].begin;
                item.end += arrayOfInlineTextCodeFormula[i].begin;
                retArray.push(item);
            });
        }
    }
    return retArray;
}
function matchWithReg(text, regExp, type, inlineTypeArray, checkArray = false) {
    let retArray = inlineTypeArray;
    let matchArray = [];
    retArray = retArray.sort((a, b) => a.begin - b.begin);
    // console.log('before-----------\n',retArray)
    while (true) {
        let match = regExp.exec(text);
        if (!match)
            break;
        let valid = true;
        // 检查冲突
        if (checkArray) {
            for (let i = 0; i < retArray.length; i++) {
                if (match.index <= retArray[i].begin) {
                    if (regExp.lastIndex <= retArray[i].begin) {
                        valid = true;
                        break;
                    }
                    else if (regExp.lastIndex <= retArray[i].end) {
                        valid = false;
                        break;
                    }
                    else if (regExp.lastIndex > retArray[i].end) {
                        let removeCount = 1;
                        valid = true;
                        for (let j = i + 1; j < retArray.length; j++) {
                            if (regExp.lastIndex <= retArray[j].begin) {
                                removeCount = j - i;
                                valid = true;
                                break;
                            }
                            else if (regExp.lastIndex < retArray[j].end) {
                                valid = false;
                                break;
                            }
                            else {
                                continue;
                            }
                        }
                        if (valid) {
                            retArray.splice(i, removeCount);
                            i -= 1;
                        }
                        break;
                    }
                }
                if (match.index > retArray[i].begin && match.index < retArray[i].end) {
                    valid = false;
                    break;
                }
            }
        }
        if (!valid)
            continue;
        matchArray.push({
            content: match[0],
            type: type,
            begin: match.index,
            end: regExp.lastIndex
        });
    }
    retArray = retArray.concat(matchArray);
    // console.log('After===========\n', retArray);
    return retArray;
}
function splitTextWithLinkAndUserDefined(text, regExps) {
    let retArray = [];
    let regWikiLink = /\!?\[\[[^\[\]]*?\]\]/g;
    let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
    let regBareLink = /(https?|obsidian|zotero):\/\/[^\s\)\(\[\]\{\}']+/g;
    // 1. 匹配wikilink
    retArray = matchWithReg(text, regWikiLink, InlineType.link, retArray);
    // 2. 匹配mdlink
    retArray = matchWithReg(text, regMdLink, InlineType.link, retArray);
    // 3. 匹配用户自定义正则
    let regExpList = [];
    if (regExps) {
        let regs = regExps.split('\n');
        for (let i = 0; i < regs.length; i++) {
            let regNull = /^\s*$/g;
            if (regNull.test(regs[i]))
                continue;
            let isValidReg = true;
            try {
                let regTemp = new RegExp(regs[i], 'g');
            }
            catch (error) {
                isValidReg = false;
                console.log('Bad Reg:', regs[i]);
            }
            if (isValidReg) {
                regExpList.push(new RegExp(regs[i], 'g'));
                // console.log('Good Reg:', regs[i]);
            }
        }
        let regLen = regExpList.length;
        for (let i = 0; i < regLen; i++) {
            retArray = matchWithReg(text, regExpList[i], InlineType.user, retArray, true);
        }
    }
    // 4. 匹配纯链接
    retArray = matchWithReg(text, regBareLink, InlineType.link, retArray, true);
    // 5. 得到剩余的文本部分
    retArray = retArray.sort((a, b) => a.begin - b.begin);
    let textArray = [];
    let textBegin = 0;
    let textEnd = 0;
    for (let i = 0; i < retArray.length; i++) {
        if (textBegin < retArray[i].begin) {
            textEnd = retArray[i].begin;
            textArray.push({
                content: text.substring(textBegin, textEnd),
                type: InlineType.text,
                begin: textBegin,
                end: textEnd
            });
        }
        textBegin = retArray[i].end;
    }
    if (textBegin != text.length) {
        textArray.push({
            content: text.substring(textBegin, text.length),
            type: InlineType.text,
            begin: textBegin,
            end: text.length
        });
    }
    // 6. 合并文本部分和其他部分
    retArray = retArray.concat(textArray);
    retArray = retArray.sort((a, b) => a.begin - b.begin);
    return retArray;
}
function formatLine(line, ch, settings) {
    if (line === '')
        return ['', 0, []];
    // 1. 划分一行文字的内部不同模块区域
    let lineParts;
    if (settings.UserDefinedRegSwitch) {
        lineParts = splitLine(line, settings.UserDefinedRegExp);
    }
    else {
        lineParts = splitLine(line);
    }
    // 备份原来的lineParts, 深拷贝
    let linePartsOrigin = JSON.parse(JSON.stringify(lineParts));
    let inlineChangeList = [];
    let cursorLinePartIndex = -1;
    let cursorRelativeIndex = -1;
    let resultCursorCh = 0; // 输出的光标位置
    // 2. 找到光标所在的部分，如果是 InlinePart.text，则在光标处插入'\0'来标记光标位置
    for (let i = 0; i < lineParts.length; i++) {
        if (ch > lineParts[i].begin && ch <= lineParts[i].end) {
            cursorLinePartIndex = i;
            cursorRelativeIndex = ch - lineParts[i].begin;
            if (lineParts[i].type === InlineType.text) {
                lineParts[i].content = stringInsertAt(lineParts[i].content, cursorRelativeIndex, '\0');
            }
            break;
        }
    }
    let resultLine = '';
    let offset = 0;
    // 保存前一部分的区块类型，InlineType.none 代表一行的开始
    let prevPartType = InlineType.none;
    let prevTextEndWithSpace = false;
    // 3. 遍历每个行部分，进行格式化处理
    for (let i = 0; i < lineParts.length; i++) {
        // console.log(inlineList[i]);
        // 3.1 如果行内第一部分为文本，则处理句首字母大写的部分
        if (i === 0 && settings.Capitalization && lineParts[i].type === InlineType.text) {
            let regFirstSentence = /^\s*(\- (\[[x ]\] )?)?[a-z]/g;
            let regHeaderSentence = /^#+ [a-z]/g;
            let textcopy = lineParts[0].content;
            let match = regFirstSentence.exec(textcopy);
            let matchHeader = regHeaderSentence.exec(textcopy);
            let dstCharIndex = -1;
            if (match) {
                dstCharIndex = regFirstSentence.lastIndex - 1;
                lineParts[0].content = textcopy.substring(0, dstCharIndex) + textcopy.charAt(dstCharIndex).toUpperCase() + textcopy.substring(dstCharIndex + 1);
            }
            else if (matchHeader) {
                dstCharIndex = regHeaderSentence.lastIndex - 1;
                lineParts[0].content = textcopy.substring(0, dstCharIndex) + textcopy.charAt(dstCharIndex).toUpperCase() + textcopy.substring(dstCharIndex + 1);
            }
        }
        // 3.2 分别处理每种区块情况
        switch (lineParts[i].type) {
            // 3.2.1 处理文本区块
            case InlineType.text:
                let content = lineParts[i].content;
                // console.log('Before', i, lineParts[i].content)
                // Text.1 处理中英文之间空格
                if (settings.ChineseEnglishSpace) {
                    var reg1 = /([A-Za-z0-9,.;?:!])([\u4e00-\u9fa5]+)/gi;
                    var reg2 = /([\u4e00-\u9fa5]+)([A-Za-z0-9])/gi;
                    lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg2, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.2 处理中文间无空格
                if (settings.ChineseNoSpace) {
                    var reg = /([\u4e00-\u9fa5，。、；‘’《》]+)(\s+)([\u4e00-\u9fa5，。、；‘’《》]+)/g;
                    while (reg.exec(content)) {
                        lineParts[i].content = content.replace(reg, "$1$3");
                        content = lineParts[i].content;
                    }
                }
                // Text.3 处理英文字母与标点间空格
                if (settings.EnglishSpace) {
                    var reg = /([,.;?:!])([A-Za-z])/gi;
                    lineParts[i].content = content.replace(reg, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.4 处理句首字母大写
                if (settings.Capitalization) {
                    var reg = /[\.;\?\!。！；？]([\s]*)[a-z]/g;
                    while (true) {
                        let match = reg.exec(content);
                        if (!match)
                            break;
                        let tempIndex = reg.lastIndex - 1;
                        lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
                        content = lineParts[i].content;
                    }
                }
                // Text.5 处理英文括号与外部文本空格
                if (settings.BraceSpace) {
                    var reg1 = /(\))([A-Za-z0-9\u4e00-\u9fa5]+)/gi;
                    var reg2 = /([A-Za-z0-9\u4e00-\u9fa5:,\.\?']+)(\()/gi;
                    lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg2, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.6 处理数字与标点的空格
                if (settings.NumberSpace) {
                    var reg1 = /([,;\?:\!\]\}])([0-9])/gi;
                    var reg2 = /([0-9])([\[\{])/gi;
                    lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg2, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.7 得到文本部分是否以空白符开始或结束，用来判断后续文本前后是否需要添加空格
                let regStartWithSpace = /^\0?[\s,\.;\?\!，。；？！\]\)\}]/;
                let regEndWithSpace = /[\s，。：？！\[\(\{]\0?$/;
                let textStartWithSpace = regStartWithSpace.test(content);
                let textEndWithSpace = regEndWithSpace.test(content);
                // console.log('Median', i, lineParts[i].content)
                // Text.8 根据前一部分的区块类型处理空格添加的问题
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                }
                // Text.9 如果光标在该区块，则计算最终光标的位置
                if (i === cursorLinePartIndex) {
                    let reg = '\0';
                    let n = content.search(reg);
                    resultCursorCh = offset + n;
                    // 删除 \0
                    lineParts[i].content = stringDeleteAt(content, n);
                }
                // console.log('After', i, lineParts[i].content)
                // Text.10 变量更新
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.text;
                prevTextEndWithSpace = textEndWithSpace;
                break;
            // 3.2.2 处理行内代码块部分
            case InlineType.code:
                // Code.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.InlineCodeSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace || settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace || settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace || settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // Code.2 如果光标在该区块，则计算最终光标的位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Code.3 变量更新
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.code;
                prevTextEndWithSpace = false;
                break;
            // 3.2.3 处理行内公式的部分
            case InlineType.formula:
                // Formula.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.InlineFormulaSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace || settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace || settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace || settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // Formula.2 如果光标在该区块，则计算最终光标的位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Formula.3 变量更新
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.formula;
                prevTextEndWithSpace = false;
                break;
            // 3.2.4 处理行内链接的部分
            case InlineType.link:
                // Link.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.LinkSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace || settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace || settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace || settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // Link.2 如果该区块有光标，则计算最终光标位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Link.3 更新变量
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.link;
                prevTextEndWithSpace = false;
                break;
            // 3.2.5 处理用户自定义区块的部分
            case InlineType.user:
                // User.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.UserPartSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace || settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace || settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace || settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // User.2 如果该区块有光标，则计算最终光标位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Link.3 更新变量
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.user;
                prevTextEndWithSpace = false;
                break;
        }
    }
    for (let i = 0; i < lineParts.length; i++) {
        if (lineParts[i].type === InlineType.text && lineParts[i].content != linePartsOrigin[i].content) {
            inlineChangeList.push({
                text: lineParts[i].content,
                begin: linePartsOrigin[i].begin,
                end: linePartsOrigin[i].end,
                origin: linePartsOrigin[i].content
            });
        }
    }
    inlineChangeList = inlineChangeList.sort((a, b) => a.begin - b.begin);
    return [resultLine, resultCursorCh, inlineChangeList];
}
class EasyTypingPlugin extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.beforeChange = (editor, obj) => {
            if (!this.settings.AutoFormatting)
                return;
            let symbol = obj.text[0];
            let replaceSymbol;
            let reg = /[-\`\$]/;
            if (reg.test(symbol)) {
                this.checkLineType = true;
            }
            if (editor.somethingSelected() && this.settings.FullWidthCharacterEnhence) {
                if (this.settings.Debug)
                    console.log('before change: symbol:', symbol);
                switch (symbol) {
                    case '￥':
                        replaceSymbol = '$$';
                        this.selectedFormatRange = editor.listSelections()[0];
                        break;
                    case '·':
                        replaceSymbol = '``';
                        break;
                    case '【':
                        replaceSymbol = '[]';
                        this.selectedFormatRange = editor.listSelections()[0];
                        break;
                    default:
                        return;
                }
                const selected = editor.getSelection();
                const replaceText = replaceSymbol.charAt(0) + selected + replaceSymbol.charAt(1);
                obj.update(null, null, [replaceText]);
            }
            else if (!editor.somethingSelected() && this.settings.FullWidthCharacterEnhence) {
                switch (symbol) {
                    case '……':
                        obj.update(null, null, ['^']);
                        break;
                    default:
                        return;
                }
            }
        };
        this.handleKeyDown = (editor, event) => {
            if (this.settings.Debug) {
                console.log('=========================');
                console.log('keydown:', event.key);
            }
            if (!this.settings.AutoFormatting)
                return;
            if (event.key === 'Process') {
                this.inputChineseFlag = true;
            }
            if (event.key === 'Control') {
                this.keyCtrlFlag = true;
            }
        };
        this.handleKeyUp = (editor, event) => {
            if (this.settings.Debug) {
                console.log('=========================');
                console.log('keyup:', event.key);
                if (event.key === 'F4') {
                    console.log("Test Begin========================");
                    console.log("Test End========================");
                    return;
                }
            }
            if (this.settings.AutoFormatting === false) {
                return;
            }
            // selectFormat
            if (this.selectedFormatRange != null) {
                let selectedStart = this.selectedFormatRange.from();
                let selectedEnd = this.selectedFormatRange.to();
                selectedStart.ch += 1;
                selectedEnd.ch += 1;
                editor.setSelection(selectedStart, selectedEnd);
                this.selectedFormatRange = null;
            }
            if (editor.somethingSelected()) {
                return;
            }
            if (this.settings.FullWidthCharacterEnhence) {
                let cursor = editor.getCursor();
                let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch + 1 });
                let character2cursor1 = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
                let twoCharactersAfterCursor = editor.getRange({ line: cursor.line, ch: cursor.ch }, { line: cursor.line, ch: cursor.ch + 2 });
                switch (event.key) {
                    case '$':
                    case '￥':
                        if (twoCharactersBeforeCursor === '￥￥') {
                            editor.replaceRange('$$', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
                        }
                        else if (character2cursor1 === '$￥$') {
                            editor.replaceRange('$$', { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor(cursor);
                        }
                        break;
                    case '[':
                    case '【':
                        if (twoCharactersBeforeCursor === '[[' && twoCharactersAfterCursor != ']]') {
                            editor.replaceRange('[[]]', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor(cursor);
                        }
                        break;
                    case '`':
                    case '·':
                        if (twoCharactersBeforeCursor === '··') {
                            editor.replaceRange('``', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
                        }
                        else if (character2cursor1 === '`·`') {
                            editor.replaceRange('`', { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor({ line: cursor.line, ch: cursor.ch + 1 });
                        }
                        break;
                }
            }
            if (event.key === 'Control') {
                this.keyCtrlFlag = false;
                return;
            }
            if (this.keyCtrlFlag && event.key === 'z') {
                return;
            }
            if (this.keySetNotUpdate.has(event.key)) {
                return;
            }
            if (this.inputChineseFlag) {
                // windows下判断中文输入的结束点，检测到数字或者空格就是输入中文结束，Shift是中文输入法输入英文。
                // 匹配,.;'<>是中文输入法的全角字符，。；‘’《》
                if (event.key.match(/[0-9 ,.;<>:'`\\\/]/gi) != null || event.key === 'Shift') {
                    // console.log("chinese input done!");
                    this.inputChineseFlag = false;
                }
                else {
                    return;
                }
            }
            let cursor = editor.getCursor();
            let line = editor.getLine(cursor.line);
            let thisLineType;
            // 在文档行数变化时，或者checkLineType为真时，重新 parse article
            if (this.checkLineType || this.prevLineCount != editor.lineCount()) {
                if (this.settings.Debug)
                    new obsidian.Notice('reparse article');
                this.lineTypeArray = splitArticle(editor.getValue());
                thisLineType = getLineTypeFromArticleParts(cursor.line, this.lineTypeArray);
                this.prevLineType = thisLineType;
                this.prevLineCount = editor.lineCount();
                this.checkLineType = false;
                this.prevCursor = cursor;
            }
            // 在其他行编辑的时候，需要先获取下行的类型
            else if (cursor.line != this.prevCursor.line) {
                thisLineType = getLineTypeFromArticleParts(cursor.line, this.lineTypeArray);
                this.prevLineType = thisLineType;
                this.prevCursor = cursor;
            }
            else {
                thisLineType = this.prevLineType;
            }
            if (thisLineType != LineType.text) {
                return;
            }
            let ret = formatLine(line, cursor.ch, this.settings);
            // console.log(line)
            // console.log(ret)
            let inlineChangeList = ret[2];
            if (inlineChangeList.length != 0) {
                let offset = 0;
                for (let i = 0; i < inlineChangeList.length; i++) {
                    let changeBegin = {
                        line: cursor.line,
                        ch: inlineChangeList[i].begin + offset
                    };
                    let changeEnd = {
                        line: cursor.line,
                        ch: inlineChangeList[i].end + offset
                    };
                    offset += inlineChangeList[i].text.length - inlineChangeList[i].origin.length;
                    editor.replaceRange(inlineChangeList[i].text, changeBegin, changeEnd);
                }
                editor.setCursor({
                    line: cursor.line,
                    ch: ret[1]
                });
                this.prevCursor = {
                    line: cursor.line,
                    ch: ret[1]
                };
                editor.focus();
            }
        };
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('loading plugin：Easy Typing');
            yield this.loadSettings();
            this.keyCtrlFlag = false;
            this.inputChineseFlag = false;
            this.keySetNotUpdate = new Set(['Control', 'Tab', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Alt', 'Backspace', 'Escape', 'Delete', 'NumLock']);
            // this.prevPosition = {type:LineType.none, line:0, ch:0};
            this.prevCursor = { line: 0, ch: 0 };
            this.prevLineType = LineType.none;
            this.prevLineCount = null;
            this.lineTypeArray = null;
            this.checkLineType = true;
            this.selectedFormatRange = null;
            this.addCommand({
                id: "easy-typing-format-line",
                name: "format current line",
                callback: () => this.commandFormatLine(),
                hotkeys: [{
                        modifiers: ['Shift'],
                        key: "tab"
                    }],
            });
            this.addCommand({
                id: "easy-typing-format-line",
                name: "switch autoformat",
                callback: () => this.commandSwitch(),
                hotkeys: [{
                        modifiers: ['Ctrl'],
                        key: "tab"
                    }],
            });
            this.addCommand({
                id: "easy-typing-format-note",
                name: "format current note",
                callback: () => this.commandFormatNote(),
                hotkeys: [{
                        modifiers: ['Alt'],
                        key: "f"
                    }],
            });
            this.addSettingTab(new EasyTypingSettingTab(this.app, this));
            this.registerCodeMirror((codeMirrorEditor) => {
                codeMirrorEditor.on('keyup', this.handleKeyUp);
                codeMirrorEditor.on('keydown', this.handleKeyDown);
                codeMirrorEditor.on('beforeChange', this.beforeChange);
            });
        });
    }
    onunload() {
        console.log('unloading plugin');
        this.app.workspace.iterateCodeMirrors((codeMirrorEditor) => {
            codeMirrorEditor.off('keyup', this.handleKeyUp);
            codeMirrorEditor.off('keydown', this.handleKeyDown);
            codeMirrorEditor.off('beforeChange', this.beforeChange);
        });
    }
    commandSwitch() {
        this.settings.AutoFormatting = this.settings.AutoFormatting ? false : true;
        let status = this.settings.AutoFormatting ? 'on' : 'off';
        new obsidian.Notice('Autoformat is ' + status + '!');
    }
    commandFormatNote() {
        let activeLeaf = this.app.workspace.activeLeaf;
        let editor = activeLeaf.view.sourceMode.cmEditor;
        let typeArray = splitArticle(editor.getValue());
        for (let i = 0; i < typeArray.length; i++) {
            if (typeArray[i].type === LineType.text) {
                for (let j = typeArray[i].begin; j < typeArray[i].end; j++) {
                    let line = editor.getLine(j);
                    let newLine = formatLine(line, line.length, this.settings)[0];
                    if (newLine != line) {
                        let start = { line: j, ch: 0 };
                        let end = { line: j, ch: line.length };
                        editor.replaceRange(newLine, start, end);
                    }
                }
            }
        }
        new obsidian.Notice('Format Note Done!');
    }
    commandFormatLine() {
        let activeLeaf = this.app.workspace.activeLeaf;
        let editor = activeLeaf.view.sourceMode.cmEditor;
        let cursor = editor.getCursor();
        let line = editor.getLine(cursor.line);
        let ret = formatLine(line, cursor.ch, this.settings);
        if (ret[0] != editor.getLine(cursor.line)) {
            let lineStart = { ch: 0, line: cursor.line };
            let lineEnd = { ch: line.length, line: cursor.line };
            editor.replaceRange(ret[0], lineStart, lineEnd);
            editor.setCursor({
                line: cursor.line,
                ch: ret[1]
            });
        }
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class EasyTypingSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        // containerEl.createEl('h2', {text: 'Settings for Easy Typing.'});
        containerEl.createEl('a', { text: 'More detail is in Github: easy-typing-obsidian', href: 'https://github.com/Yaozhuwa/easy-typing-obsidian' });
        containerEl.createEl('h2', { text: '总开关 (Master Switch)' });
        new obsidian.Setting(containerEl)
            .setName("Auto formatting")
            .setDesc("是否在编辑文档时自动格式化文本")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.AutoFormatting)
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.AutoFormatting = value;
                console.log("AutoFormatting:", value);
                yield this.plugin.saveSettings();
            }));
        });
        containerEl.createEl('h2', { text: '详细规则开关 (Sub Switches)' });
        new obsidian.Setting(containerEl)
            .setName("Space between Chinese and English/number")
            .setDesc("在中文和英文/数字间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.ChineseEnglishSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.ChineseEnglishSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Delete the Space between Chinese characters")
            .setDesc("在中文字符间去除空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.ChineseNoSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.ChineseNoSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between English with punctuate")
            .setDesc("在英文文本和标点间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.EnglishSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.EnglishSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Capitalize the first letter of every sentence")
            .setDesc("英文每个句首字母大写")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.Capitalization).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.Capitalization = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between number and English text")
            .setDesc("数字和标点间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.NumberSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.NumberSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between English braces and text")
            .setDesc("在英文小括号和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.BraceSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.BraceSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between inline code and text")
            .setDesc("在 `行内代码` 和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.InlineCodeSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.InlineCodeSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between inline formula and text")
            .setDesc("在 $行内公式$ 和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.InlineFormulaSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.InlineFormulaSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between link and text")
            .setDesc("在 [[wikilink]] mdlink 和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.LinkSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.LinkSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Full-Width symbol input enhancement")
            .setDesc("全角符号输入增强")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.FullWidthCharacterEnhence).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.FullWidthCharacterEnhence = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between User Defined Part(selected by RegExp) and text")
            .setDesc("在用户自定义区块(正则表达式选择)和文本之间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.UserPartSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.UserPartSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("User Defined RegExp Switch")
            .setDesc("自定义正则表达式开关，匹配到的内容不进行格式化")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.UserDefinedRegSwitch).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.UserDefinedRegSwitch = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("User defined RegExp to ignore, one expression per line")
            .setDesc("用户自定义正则表达式，匹配到的内容不进行格式化，每行一个表达式，行尾不要随意加空格")
            .addTextArea((text) => text
            .setPlaceholder(':\\w*:\n{{.*?}}')
            .setValue(this.plugin.settings.UserDefinedRegExp)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.UserDefinedRegExp = value;
            if (this.plugin.settings.Debug)
                console.log("regExp changed:", value);
            yield this.plugin.saveSettings();
        })));
        containerEl.createEl('a', { text: 'RegExp: 正则表达式', href: 'https://javascript.ruanyifeng.com/stdlib/regexp.html#' });
        containerEl.createEl('h2', { text: 'Debug' });
        new obsidian.Setting(containerEl)
            .setName("Print debug info in console")
            .setDesc("在控制台输出调试信息")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.Debug).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.Debug = value;
                yield this.plugin.saveSettings();
            }));
        });
    }
}

module.exports = EasyTypingPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImltcG9ydCB7IEFwcCwgRWRpdG9yLCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5lbnVtIElubGluZVR5cGUge3RleHQ9J3RleHQnLCBjb2RlPSdjb2RlJywgZm9ybXVsYT0nZm9ybXVsYScsIGxpbms9J2xpbmsnLCB1c2VyPSd1c2VyLWRlZmluZWQnLCBub25lPSdub25lJ31cclxuZW51bSBMaW5lVHlwZSB7dGV4dD0ndGV4dCcsIGNvZGU9J2NvZGUnLCBmb3JtdWxhPSdmb3JtdWxhJywgZnJvbnRtYXR0ZXI9J2Zyb250bWF0dGVyJywgbm9uZT0nbm9uZSd9O1xyXG5cclxuaW50ZXJmYWNlIEFydGljbGVQYXJ0XHJcbntcclxuICAgIHR5cGU6IExpbmVUeXBlO1xyXG4gICAgYmVnaW46IG51bWJlcjtcclxuICAgIGVuZDogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBJbmxpbmVQYXJ0XHJcbntcclxuICAgIGNvbnRlbnQ6IHN0cmluZyxcclxuICAgIHR5cGU6IElubGluZVR5cGUsXHJcbiAgICBiZWdpbjogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXJcclxufVxyXG5cclxuaW50ZXJmYWNlIElubGluZUNoYW5nZVxyXG57XHJcbiAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICBiZWdpbjogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXIsXHJcbiAgICBvcmlnaW46c3RyaW5nXHJcbn1cclxuXHJcbmludGVyZmFjZSBGb3JtYXRTZXR0aW5nc1xyXG57XHJcbiAgICBBdXRvRm9ybWF0dGluZzogYm9vbGVhbjtcclxuXHRDaGluZXNlRW5nbGlzaFNwYWNlOiBib29sZWFuO1xyXG5cdENoaW5lc2VOb1NwYWNlOiBib29sZWFuO1xyXG5cdEVuZ2xpc2hTcGFjZTogYm9vbGVhbjtcclxuXHRDYXBpdGFsaXphdGlvbjogYm9vbGVhbjtcclxuXHRCcmFjZVNwYWNlOiBib29sZWFuO1xyXG5cdE51bWJlclNwYWNlOiBib29sZWFuO1xyXG5cclxuICAgIElubGluZUNvZGVTcGFjZTogYm9vbGVhbjtcclxuXHRJbmxpbmVGb3JtdWxhU3BhY2U6IGJvb2xlYW47XHJcbiAgICBMaW5rU3BhY2U6IGJvb2xlYW47XHJcblxyXG4gICAgRnVsbFdpZHRoQ2hhcmFjdGVyRW5oZW5jZTpib29sZWFuO1xyXG5cclxuICAgIFVzZXJEZWZpbmVkUmVnRXhwOnN0cmluZztcclxuICAgIFVzZXJEZWZpbmVkUmVnU3dpdGNoOiBib29sZWFuO1xyXG4gICAgVXNlclBhcnRTcGFjZTogYm9vbGVhbjtcclxuXHJcbiAgICBEZWJ1ZzogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRm9ybWF0U2V0dGluZ3MgPSB7XHJcbiAgICBBdXRvRm9ybWF0dGluZzogdHJ1ZSxcclxuXHRDaGluZXNlRW5nbGlzaFNwYWNlOiB0cnVlLFxyXG5cdENoaW5lc2VOb1NwYWNlOiB0cnVlLFxyXG5cdEVuZ2xpc2hTcGFjZTogdHJ1ZSxcclxuXHRDYXBpdGFsaXphdGlvbjogdHJ1ZSxcclxuXHRCcmFjZVNwYWNlOiB0cnVlLFxyXG5cdE51bWJlclNwYWNlOiB0cnVlLFxyXG5cclxuICAgIElubGluZUNvZGVTcGFjZTogdHJ1ZSxcclxuXHRJbmxpbmVGb3JtdWxhU3BhY2U6IHRydWUsXHJcblx0TGlua1NwYWNlOiB0cnVlLFxyXG5cclxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2U6dHJ1ZSxcclxuICAgIFVzZXJEZWZpbmVkUmVnRXhwOic6XFxcXHcqOlxcbnt7Lio/fX0nLFxyXG4gICAgVXNlckRlZmluZWRSZWdTd2l0Y2g6IHRydWUsXHJcbiAgICBVc2VyUGFydFNwYWNlOnRydWUsXHJcbiAgICBEZWJ1ZzpmYWxzZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMaW5lVHlwZShhcnRpY2xlOnN0cmluZywgbGluZTogbnVtYmVyKTpMaW5lVHlwZVxyXG57XHJcbiAgICBsZXQgdHlwZUFycmF5ID0gc3BsaXRBcnRpY2xlKGFydGljbGUpO1xyXG4gICAgZm9yKGxldCBpPTA7aTx0eXBlQXJyYXkubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihsaW5lID49IHR5cGVBcnJheVtpXS5iZWdpbiAmJiBsaW5lPHR5cGVBcnJheVtpXS5lbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZUFycmF5W2ldLnR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMobGluZTogbnVtYmVyLCB0eXBlQXJyYXk6IEFydGljbGVQYXJ0W10pOkxpbmVUeXBlXHJcbntcclxuICAgIGZvcihsZXQgaT0wO2k8dHlwZUFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYobGluZSA+PSB0eXBlQXJyYXlbaV0uYmVnaW4gJiYgbGluZTx0eXBlQXJyYXlbaV0uZW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVBcnJheVtpXS50eXBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3BsaXRBcnRpY2xlKGFydGljbGU6c3RyaW5nKTogQXJ0aWNsZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmV0QXJyYXk6IEFydGljbGVQYXJ0W10gPSBbXTtcclxuICAgIGxldCBsaW5lcyA9IGFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG4gICAgbGV0IHJlZ051bGxMaW5lID0gL15cXHMqJC87XHJcbiAgICBsZXQgcmVnRm9ybXVsYUJlZ2luID0gL15cXHMqKFxcLSAoXFxbW3ggXVxcXSApPyk/XFwkXFwkLztcclxuICAgIGxldCByZWdGb3JtdWxhRW5kID0gL1xcJFxcJCQvO1xyXG4gICAgbGV0IHJlZ0NvZGVCZWdpbiA9IC9eXFxzKmBgYC87XHJcbiAgICBsZXQgcmVnQ29kZUVuZCA9IC9eXFxzKmBgYCQvO1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAvLyAxLiDliKTmlq0gZnJvbnRtYXR0ZXJcclxuICAgIGxldCBmcm9udE1hdHRlclBhcnQ6IEFydGljbGVQYXJ0O1xyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHJlZ051bGxMaW5lLnRlc3QobGluZXNbaV0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYobGluZXNbaV09PT0nLS0tJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaj1pKzE7IGo8bGluZXMubGVuZ3RoO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYobGluZXNbal09PT0nLS0tJylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihpIT0wKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDppXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmcm9udE1hdHRlclBhcnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZyb250bWF0dGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBqKzFcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goZnJvbnRNYXR0ZXJQYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGorMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ2luZGV4JywgaW5kZXgpO1xyXG5cclxuICAgIC8vIDIuIOmBjeWOhuihjOW+l+WIsCBMaW5lVHlwZSDliIbljLpcclxuICAgIHdoaWxlKGluZGV4PGxpbmVzLmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICBpZihyZWdDb2RlQmVnaW4udGVzdChsaW5lc1tpbmRleF0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGogPSBpbmRleCsxO1xyXG4gICAgICAgICAgICB3aGlsZShqPGxpbmVzLmxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocmVnQ29kZUVuZC50ZXN0KGxpbmVzW2pdKSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjppbmRleCxcclxuICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGluZGV4ID0gaisxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHJlZ0Zvcm11bGFCZWdpbi50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVnRm9ybXVsYU9uZUxpbmUgPSAvKD88IVxcXFwpXFwkXFwkKD8hIClbXl0qPyg/PCEgKSg/PCFcXFxcKVxcJFxcJC9nO1xyXG4gICAgICAgICAgICBpZihyZWdGb3JtdWxhT25lTGluZS50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogaW5kZXgrMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XHJcbiAgICAgICAgICAgICAgICB3aGlsZShqPGxpbmVzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWdGb3JtdWxhRW5kLnRlc3QobGluZXNbal0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5mb3JtdWxhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBqKzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGogPSBpbmRleCsxO1xyXG4gICAgICAgICAgICBmb3IoO2o8bGluZXMubGVuZ3RoO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocmVnQ29kZUJlZ2luLnRlc3QobGluZXNbal0pIHx8IHJlZ0Zvcm11bGFCZWdpbi50ZXN0KGxpbmVzW2pdKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBlbmQ6alxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaW5kZXggPSBqO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0QXJyYXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ0RlbGV0ZUF0KHN0cjogc3RyaW5nLCBpbmRleDogbnVtYmVyKTpzdHJpbmdcclxue1xyXG4gICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgaW5kZXgpK3N0ci5zdWJzdHJpbmcoaW5kZXgrMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ0luc2VydEF0KHN0cjpzdHJpbmcsIGluZGV4OiBudW1iZXIsIHM6IHN0cmluZyk6c3RyaW5nXHJcbntcclxuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGluZGV4KStzK3N0ci5zdWJzdHJpbmcoaW5kZXgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzcGxpdExpbmUobGluZTogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOiBJbmxpbmVQYXJ0W11cclxue1xyXG4gICAgbGV0IHJlZ0lubGluZU1hcmsgPSAvKD88IVxcXFwpXFwkfCg/PCFcXFxcKVxcYC9nO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFJbmxpbmUgPSAvKD88IVxcXFwpXFwkKD8hIClbXl0rPyg/PCEgKSg/PCFcXFxcKVxcJC9nO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFCbG9jayA9IC8oPzwhXFxcXClcXCRcXCQoPyEgKVteXSo/KD88ISApKD88IVxcXFwpXFwkXFwkL2c7XHJcbiAgICBsZXQgcmVnQ29kZSA9IC8oPzwhXFxcXClgW15dKj8oPzwhXFxcXClgL2c7XHJcbiAgICBsZXQgbWFya1F1ZXVlOlJlZ0V4cEV4ZWNBcnJheVtdID0gW107XHJcbiAgICBsZXQgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYTogSW5saW5lUGFydFtdID0gW107XHJcblxyXG4gICAgd2hpbGUodHJ1ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSByZWdJbmxpbmVNYXJrLmV4ZWMobGluZSk7XHJcbiAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICBtYXJrUXVldWUucHVzaChtYXRjaCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRleHRCZWdpbkluZGV4ID0gMDtcclxuICAgIHdoaWxlKG1hcmtRdWV1ZS5sZW5ndGghPTApXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG1hcmsgPSBtYXJrUXVldWUuc2hpZnQoKTtcclxuICAgICAgICBpZihtYXJrLmluZGV4PHRleHRCZWdpbkluZGV4KSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgaWYobWFya1swXT09PSckJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaEZvcm11bGFCZWdpbkluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgbGV0IG1hdGNoRm9ybXVsYUxhc3RJbmRleDpudW1iZXI7XHJcbiAgICAgICAgICAgIHJlZ0Zvcm11bGFCbG9jay5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hCbG9ja0Zvcm11bGEgPSByZWdGb3JtdWxhQmxvY2suZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgaWYobWF0Y2hCbG9ja0Zvcm11bGEgJiYgbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFCZWdpbkluZGV4ID0gbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFMYXN0SW5kZXggPSByZWdGb3JtdWxhQmxvY2subGFzdEluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoSW5saW5lRm9ybXVsYSA9IHJlZ0Zvcm11bGFJbmxpbmUuZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoSW5saW5lRm9ybXVsYSAmJiBtYXRjaElubGluZUZvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoRm9ybXVsYUJlZ2luSW5kZXggPSBtYXRjaElubGluZUZvcm11bGEuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3JtdWxhTGFzdEluZGV4ID0gcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmsqHljLnphY3liLDvvIzliJkgY29udGludWVcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYobWFyay5pbmRleD50ZXh0QmVnaW5JbmRleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcodGV4dEJlZ2luSW5kZXgsIG1hcmsuaW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXJrLmluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKG1hdGNoRm9ybXVsYUJlZ2luSW5kZXgsIG1hdGNoRm9ybXVsYUxhc3RJbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46bWF0Y2hGb3JtdWxhQmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6bWF0Y2hGb3JtdWxhTGFzdEluZGV4XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRleHRCZWdpbkluZGV4ID0gbWF0Y2hGb3JtdWxhTGFzdEluZGV4O1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihtYXJrWzBdPT09J2AnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoQ29kZUJlZ2luSW5kZXg6bnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hDb2RlTGFzdEluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgcmVnQ29kZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hJbmxpbmVDb2RlID0gcmVnQ29kZS5leGVjKGxpbmUpO1xyXG4gICAgICAgICAgICBpZihtYXRjaElubGluZUNvZGUgJiYgbWF0Y2hJbmxpbmVDb2RlLmluZGV4PT09bWFyay5pbmRleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hDb2RlQmVnaW5JbmRleCA9IG1hdGNoSW5saW5lQ29kZS5pbmRleDtcclxuICAgICAgICAgICAgICAgIG1hdGNoQ29kZUxhc3RJbmRleCA9IHJlZ0NvZGUubGFzdEluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG1hcmsuaW5kZXg+dGV4dEJlZ2luSW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLnN1YnN0cmluZyh0ZXh0QmVnaW5JbmRleCwgbWFyay5pbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbWFyay5pbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcobWF0Y2hDb2RlQmVnaW5JbmRleCwgbWF0Y2hDb2RlTGFzdEluZGV4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOm1hdGNoQ29kZUJlZ2luSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDptYXRjaENvZGVMYXN0SW5kZXhcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJlZ2luSW5kZXggPSBtYXRjaENvZGVMYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYodGV4dEJlZ2luSW5kZXghPWxpbmUubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGEucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcodGV4dEJlZ2luSW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjp0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgIGVuZDpsaW5lLmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS50eXBlIT1JbmxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGFbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgdGVtcEFycmF5OklubGluZVBhcnRbXTtcclxuICAgICAgICAgICAgaWYocmVnRXhwcylcclxuICAgICAgICAgICAgICAgIHRlbXBBcnJheSA9IHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5jb250ZW50LCByZWdFeHBzKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGVtcEFycmF5ID0gc3BsaXRUZXh0V2l0aExpbmtBbmRVc2VyRGVmaW5lZChhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGVtcEFycmF5LmZvckVhY2goaXRlbT0+e1xyXG4gICAgICAgICAgICAgICAgaXRlbS5iZWdpbiArPSBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5lbmQgKz0gYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5iZWdpbjtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0QXJyYXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hdGNoV2l0aFJlZyh0ZXh0OnN0cmluZywgcmVnRXhwOlJlZ0V4cCwgdHlwZTogSW5saW5lVHlwZSwgaW5saW5lVHlwZUFycmF5OklubGluZVBhcnRbXSwgY2hlY2tBcnJheT1mYWxzZSk6SW5saW5lUGFydFtdXHJcbntcclxuICAgIGxldCByZXRBcnJheSA9IGlubGluZVR5cGVBcnJheTtcclxuICAgIGxldCBtYXRjaEFycmF5OklubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnYmVmb3JlLS0tLS0tLS0tLS1cXG4nLHJldEFycmF5KVxyXG4gICAgd2hpbGUodHJ1ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSByZWdFeHAuZXhlYyh0ZXh0KTsgXHJcbiAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIOajgOafpeWGsueqgVxyXG4gICAgICAgIGlmKGNoZWNrQXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IobGV0IGk9MDtpPHJldEFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoLmluZGV4PD1yZXRBcnJheVtpXS5iZWdpbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWdFeHAubGFzdEluZGV4IDw9IHJldEFycmF5W2ldLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4IDw9IHJldEFycmF5W2ldLmVuZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ0V4cC5sYXN0SW5kZXggPiByZXRBcnJheVtpXS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlQ291bnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaj1pKzE7IGo8cmV0QXJyYXkubGVuZ3RoO2orKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnRXhwLmxhc3RJbmRleDw9cmV0QXJyYXlbal0uYmVnaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ291bnQgPSBqLWk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4PHJldEFycmF5W2pdLmVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWxpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkuc3BsaWNlKGksIHJlbW92ZUNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihtYXRjaC5pbmRleD5yZXRBcnJheVtpXS5iZWdpbiAmJiBtYXRjaC5pbmRleDxyZXRBcnJheVtpXS5lbmQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighdmFsaWQpIGNvbnRpbnVlO1xyXG4gICAgICAgIG1hdGNoQXJyYXkucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogbWF0Y2hbMF0sXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgYmVnaW46IG1hdGNoLmluZGV4LFxyXG4gICAgICAgICAgICAgICAgZW5kOiByZWdFeHAubGFzdEluZGV4XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5jb25jYXQobWF0Y2hBcnJheSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnQWZ0ZXI9PT09PT09PT09PVxcbicsIHJldEFycmF5KTtcclxuICAgIHJldHVybiByZXRBcnJheTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQodGV4dDogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOklubGluZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IHJlZ1dpa2lMaW5rID0gL1xcIT9cXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS9nO1xyXG4gICAgbGV0IHJlZ01kTGluayA9IC9cXCE/XFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xyXG4gICAgbGV0IHJlZ0JhcmVMaW5rID0gLyhodHRwcz98b2JzaWRpYW58em90ZXJvKTpcXC9cXC9bXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKy9nO1xyXG5cclxuICAgIC8vIDEuIOWMuemFjXdpa2lsaW5rXHJcbiAgICByZXRBcnJheSA9IG1hdGNoV2l0aFJlZyh0ZXh0LCByZWdXaWtpTGluaywgSW5saW5lVHlwZS5saW5rLCByZXRBcnJheSk7XHJcbiAgICAvLyAyLiDljLnphY1tZGxpbmtcclxuICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ01kTGluaywgSW5saW5lVHlwZS5saW5rLCByZXRBcnJheSk7XHJcblxyXG4gICAgLy8gMy4g5Yy56YWN55So5oi36Ieq5a6a5LmJ5q2j5YiZXHJcbiAgICBsZXQgcmVnRXhwTGlzdDogUmVnRXhwW10gPSBbXTtcclxuICAgIGlmKHJlZ0V4cHMpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlZ3MgPSByZWdFeHBzLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPHJlZ3MubGVuZ3RoO2krKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCByZWdOdWxsID0gL15cXHMqJC9nO1xyXG4gICAgICAgICAgICBpZihyZWdOdWxsLnRlc3QocmVnc1tpXSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBsZXQgaXNWYWxpZFJlZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIGxldCByZWdUZW1wID0gbmV3IFJlZ0V4cChyZWdzW2ldLCAnZycpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goZXJyb3IpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlzVmFsaWRSZWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgUmVnOicsIHJlZ3NbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihpc1ZhbGlkUmVnKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnRXhwTGlzdC5wdXNoKG5ldyBSZWdFeHAocmVnc1tpXSwgJ2cnKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnR29vZCBSZWc6JywgcmVnc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlZ0xlbiA9IHJlZ0V4cExpc3QubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IobGV0IGk9MDtpPHJlZ0xlbjtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXRBcnJheSA9IG1hdGNoV2l0aFJlZyh0ZXh0LCByZWdFeHBMaXN0W2ldLCBJbmxpbmVUeXBlLnVzZXIsIHJldEFycmF5LCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIDQuIOWMuemFjee6r+mTvuaOpVxyXG4gICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnQmFyZUxpbmssIElubGluZVR5cGUubGluaywgcmV0QXJyYXksIHRydWUpO1xyXG5cclxuICAgIC8vIDUuIOW+l+WIsOWJqeS9meeahOaWh+acrOmDqOWIhlxyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcblxyXG4gICAgbGV0IHRleHRBcnJheSA6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IHRleHRCZWdpbiA9IDA7XHJcbiAgICBsZXQgdGV4dEVuZCA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDtpPHJldEFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGV4dEJlZ2luPHJldEFycmF5W2ldLmJlZ2luKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dEVuZCA9IHJldEFycmF5W2ldLmJlZ2luO1xyXG4gICAgICAgICAgICB0ZXh0QXJyYXkucHVzaChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0ZXh0LnN1YnN0cmluZyh0ZXh0QmVnaW4sIHRleHRFbmQpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IElubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogdGV4dEJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogdGV4dEVuZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0QmVnaW4gPSByZXRBcnJheVtpXS5lbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGV4dEJlZ2luIT10ZXh0Lmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICB0ZXh0QXJyYXkucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zdWJzdHJpbmcodGV4dEJlZ2luLCB0ZXh0Lmxlbmd0aCksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjogdGV4dEJlZ2luLFxyXG4gICAgICAgICAgICAgICAgZW5kOiB0ZXh0Lmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA2LiDlkIjlubbmlofmnKzpg6jliIblkozlhbbku5bpg6jliIZcclxuICAgIHJldEFycmF5ID0gcmV0QXJyYXkuY29uY2F0KHRleHRBcnJheSk7XHJcbiAgICByZXRBcnJheSA9IHJldEFycmF5LnNvcnQoKGEsIGIpOm51bWJlcj0+YS5iZWdpbi1iLmJlZ2luKTtcclxuICAgIHJldHVybiByZXRBcnJheVxyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMaW5lKGxpbmU6IHN0cmluZywgY2g6IG51bWJlciwgc2V0dGluZ3M6IEZvcm1hdFNldHRpbmdzKTpbc3RyaW5nLCBudW1iZXIsIElubGluZUNoYW5nZVtdXXxudWxsXHJcbntcclxuICAgIGlmKGxpbmU9PT0nJykgcmV0dXJuIFsnJywgMCwgW11dO1xyXG5cclxuICAgIC8vIDEuIOWIkuWIhuS4gOihjOaWh+Wtl+eahOWGhemDqOS4jeWQjOaooeWdl+WMuuWfn1xyXG4gICAgbGV0IGxpbmVQYXJ0czpJbmxpbmVQYXJ0W107XHJcbiAgICBpZihzZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ1N3aXRjaClcclxuICAgIHtcclxuICAgICAgICBsaW5lUGFydHMgPSBzcGxpdExpbmUobGluZSwgc2V0dGluZ3MuVXNlckRlZmluZWRSZWdFeHApO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGxpbmVQYXJ0cyA9IHNwbGl0TGluZShsaW5lKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlpIfku73ljp/mnaXnmoRsaW5lUGFydHMsIOa3seaLt+i0nVxyXG4gICAgbGV0IGxpbmVQYXJ0c09yaWdpbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobGluZVBhcnRzKSk7XHJcbiAgICBsZXQgaW5saW5lQ2hhbmdlTGlzdDpJbmxpbmVDaGFuZ2VbXSA9IFtdO1xyXG4gICAgXHJcbiAgICBsZXQgY3Vyc29yTGluZVBhcnRJbmRleCA9IC0xO1xyXG4gICAgbGV0IGN1cnNvclJlbGF0aXZlSW5kZXggPSAtMTtcclxuICAgIGxldCByZXN1bHRDdXJzb3JDaCA9IDA7ICAgICAvLyDovpPlh7rnmoTlhYnmoIfkvY3nva5cclxuXHJcbiAgICAvLyAyLiDmib7liLDlhYnmoIfmiYDlnKjnmoTpg6jliIbvvIzlpoLmnpzmmK8gSW5saW5lUGFydC50ZXh077yM5YiZ5Zyo5YWJ5qCH5aSE5o+S5YWlJ1xcMCfmnaXmoIforrDlhYnmoIfkvY3nva5cclxuICAgIGZvcihsZXQgaT0wO2k8bGluZVBhcnRzLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYoY2g+bGluZVBhcnRzW2ldLmJlZ2luICYmIGNoPD1saW5lUGFydHNbaV0uZW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3Vyc29yTGluZVBhcnRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgIGN1cnNvclJlbGF0aXZlSW5kZXggPSBjaC1saW5lUGFydHNbaV0uYmVnaW47XHJcbiAgICAgICAgICAgIGlmKGxpbmVQYXJ0c1tpXS50eXBlPT09SW5saW5lVHlwZS50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IHN0cmluZ0luc2VydEF0KGxpbmVQYXJ0c1tpXS5jb250ZW50LCBjdXJzb3JSZWxhdGl2ZUluZGV4LCAnXFwwJyk7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0TGluZSA9ICcnO1xyXG4gICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICAvLyDkv53lrZjliY3kuIDpg6jliIbnmoTljLrlnZfnsbvlnovvvIxJbmxpbmVUeXBlLm5vbmUg5Luj6KGo5LiA6KGM55qE5byA5aeLXHJcbiAgICBsZXQgcHJldlBhcnRUeXBlOnN0cmluZyA9IElubGluZVR5cGUubm9uZTtcclxuICAgIGxldCBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG5cclxuICAgIC8vIDMuIOmBjeWOhuavj+S4quihjOmDqOWIhu+8jOi/m+ihjOagvOW8j+WMluWkhOeQhlxyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lUGFydHMubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmxpbmVMaXN0W2ldKTtcclxuXHJcbiAgICAgICAgLy8gMy4xIOWmguaenOihjOWGheesrOS4gOmDqOWIhuS4uuaWh+acrO+8jOWImeWkhOeQhuWPpemmluWtl+avjeWkp+WGmeeahOmDqOWIhlxyXG4gICAgICAgIGlmKGk9PT0wICYmIHNldHRpbmdzLkNhcGl0YWxpemF0aW9uICYmIGxpbmVQYXJ0c1tpXS50eXBlPT09SW5saW5lVHlwZS50ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHJlZ0ZpcnN0U2VudGVuY2UgPSAvXlxccyooXFwtIChcXFtbeCBdXFxdICk/KT9bYS16XS9nO1xyXG4gICAgICAgICAgICBsZXQgcmVnSGVhZGVyU2VudGVuY2UgPSAvXiMrIFthLXpdL2c7XHJcbiAgICAgICAgICAgIGxldCB0ZXh0Y29weSA9IGxpbmVQYXJ0c1swXS5jb250ZW50O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2ggPSByZWdGaXJzdFNlbnRlbmNlLmV4ZWModGV4dGNvcHkpO1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hIZWFkZXIgPSByZWdIZWFkZXJTZW50ZW5jZS5leGVjKHRleHRjb3B5KTtcclxuICAgICAgICAgICAgbGV0IGRzdENoYXJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBpZihtYXRjaClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZHN0Q2hhckluZGV4ID0gcmVnRmlyc3RTZW50ZW5jZS5sYXN0SW5kZXgtMTtcclxuICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1swXS5jb250ZW50ID0gdGV4dGNvcHkuc3Vic3RyaW5nKDAsIGRzdENoYXJJbmRleCkrdGV4dGNvcHkuY2hhckF0KGRzdENoYXJJbmRleCkudG9VcHBlckNhc2UoKSt0ZXh0Y29weS5zdWJzdHJpbmcoZHN0Q2hhckluZGV4KzEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobWF0Y2hIZWFkZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRzdENoYXJJbmRleCA9IHJlZ0hlYWRlclNlbnRlbmNlLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgbGluZVBhcnRzWzBdLmNvbnRlbnQgPSB0ZXh0Y29weS5zdWJzdHJpbmcoMCwgZHN0Q2hhckluZGV4KSt0ZXh0Y29weS5jaGFyQXQoZHN0Q2hhckluZGV4KS50b1VwcGVyQ2FzZSgpK3RleHRjb3B5LnN1YnN0cmluZyhkc3RDaGFySW5kZXgrMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gMy4yIOWIhuWIq+WkhOeQhuavj+enjeWMuuWdl+aDheWGtVxyXG4gICAgICAgIHN3aXRjaChsaW5lUGFydHNbaV0udHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIDMuMi4xIOWkhOeQhuaWh+acrOWMuuWdl1xyXG4gICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQmVmb3JlJywgaSwgbGluZVBhcnRzW2ldLmNvbnRlbnQpXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjEg5aSE55CG5Lit6Iux5paH5LmL6Ze056m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DaGluZXNlRW5nbGlzaFNwYWNlKXtcclxuXHRcdFx0XHRcdHZhciByZWcxPS8oW0EtWmEtejAtOSwuOz86IV0pKFtcXHU0ZTAwLVxcdTlmYTVdKykvZ2k7XHJcblx0XHRcdFx0XHR2YXIgcmVnMj0vKFtcXHU0ZTAwLVxcdTlmYTVdKykoW0EtWmEtejAtOV0pL2dpO1xyXG5cdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMSwgXCIkMSAkMlwiKS5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuMiDlpITnkIbkuK3mlofpl7Tml6DnqbrmoLxcclxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkNoaW5lc2VOb1NwYWNlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciByZWc9LyhbXFx1NGUwMC1cXHU5ZmE177yM44CC44CB77yb4oCY4oCZ44CK44CLXSspKFxccyspKFtcXHU0ZTAwLVxcdTlmYTXvvIzjgILjgIHvvJvigJjigJnjgIrjgItdKykvZztcclxuXHRcdFx0XHRcdHdoaWxlKHJlZy5leGVjKGNvbnRlbnQpKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcsIFwiJDEkM1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjMg5aSE55CG6Iux5paH5a2X5q+N5LiO5qCH54K56Ze056m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5FbmdsaXNoU3BhY2UpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIHJlZyA9IC8oWywuOz86IV0pKFtBLVphLXpdKS9naTtcclxuXHRcdFx0XHRcdGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZywgXCIkMSAkMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcblx0XHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuNCDlpITnkIblj6XpppblrZfmr43lpKflhplcclxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkNhcGl0YWxpemF0aW9uKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciByZWcgPSAvW1xcLjtcXD9cXCHjgILvvIHvvJvvvJ9dKFtcXHNdKilbYS16XS9nO1xyXG5cdFx0XHRcdFx0d2hpbGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJlZy5leGVjKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gcmVnLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHRlbXBJbmRleCkgKyBjb250ZW50LmNoYXJBdCh0ZW1wSW5kZXgpLnRvVXBwZXJDYXNlKCkgKyBjb250ZW50LnN1YnN0cmluZyhyZWcubGFzdEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjUg5aSE55CG6Iux5paH5ous5Y+35LiO5aSW6YOo5paH5pys56m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5CcmFjZVNwYWNlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciByZWcxID0gLyhcXCkpKFtBLVphLXowLTlcXHU0ZTAwLVxcdTlmYTVdKykvZ2k7XHJcblx0XHRcdFx0XHR2YXIgcmVnMiA9IC8oW0EtWmEtejAtOVxcdTRlMDAtXFx1OWZhNTosXFwuXFw/J10rKShcXCgpL2dpO1xyXG5cdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMSwgXCIkMSAkMlwiKS5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjYg5aSE55CG5pWw5a2X5LiO5qCH54K555qE56m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5OdW1iZXJTcGFjZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgcmVnMSA9IC8oWyw7XFw/OlxcIVxcXVxcfV0pKFswLTldKS9naTtcclxuXHRcdFx0XHRcdHZhciByZWcyID0gLyhbMC05XSkoW1xcW1xce10pL2dpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZzEsIFwiJDEgJDJcIikucmVwbGFjZShyZWcyLCBcIiQxICQyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuXHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0Ljcg5b6X5Yiw5paH5pys6YOo5YiG5piv5ZCm5Lul56m655m956ym5byA5aeL5oiW57uT5p2f77yM55So5p2l5Yik5pat5ZCO57ut5paH5pys5YmN5ZCO5piv5ZCm6ZyA6KaB5re75Yqg56m65qC8XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnU3RhcnRXaXRoU3BhY2UgPSAvXlxcMD9bXFxzLFxcLjtcXD9cXCHvvIzjgILvvJvvvJ/vvIFcXF1cXClcXH1dLztcclxuICAgICAgICAgICAgICAgIGxldCByZWdFbmRXaXRoU3BhY2UgPSAvW1xcc++8jOOAgu+8mu+8n++8gVxcW1xcKFxce11cXDA/JC87XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dFN0YXJ0V2l0aFNwYWNlID0gcmVnU3RhcnRXaXRoU3BhY2UudGVzdChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0RW5kV2l0aFNwYWNlID0gcmVnRW5kV2l0aFNwYWNlLnRlc3QoY29udGVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01lZGlhbicsIGksIGxpbmVQYXJ0c1tpXS5jb250ZW50KVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuOCDmoLnmja7liY3kuIDpg6jliIbnmoTljLrlnZfnsbvlnovlpITnkIbnqbrmoLzmt7vliqDnmoTpl67pophcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0Ljkg5aaC5p6c5YWJ5qCH5Zyo6K+l5Yy65Z2X77yM5YiZ6K6h566X5pyA57uI5YWJ5qCH55qE5L2N572uXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWcgPSAnXFwwJztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IGNvbnRlbnQuc2VhcmNoKHJlZylcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIG47XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yig6ZmkIFxcMFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gc3RyaW5nRGVsZXRlQXQoY29udGVudCwgbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQWZ0ZXInLCBpLCBsaW5lUGFydHNbaV0uY29udGVudClcclxuICAgICAgICAgICAgICAgIC8vIFRleHQuMTAg5Y+Y6YeP5pu05pawXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUudGV4dDtcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gdGV4dEVuZFdpdGhTcGFjZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMy4yLjIg5aSE55CG6KGM5YaF5Luj56CB5Z2X6YOo5YiGXHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgLy8gQ29kZS4xIOagueaNruWJjeS4gOWMuuWdl+exu+Wei+WSjHNldHRpbmdz5re75Yqg56m65qC8XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENvZGUuMiDlpoLmnpzlhYnmoIflnKjor6XljLrlnZfvvIzliJnorqHnrpfmnIDnu4jlhYnmoIfnmoTkvY3nva5cclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gQ29kZS4zIOWPmOmHj+abtOaWsFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLmNvZGU7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLyAzLjIuMyDlpITnkIbooYzlhoXlhazlvI/nmoTpg6jliIZcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAvLyBGb3JtdWxhLjEg5qC55o2u5YmN5LiA5Yy65Z2X57G75Z6L5ZKMc2V0dGluZ3Pmt7vliqDnqbrmoLxcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgJiYgIXByZXZUZXh0RW5kV2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlIHx8IHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3JtdWxhLjIg5aaC5p6c5YWJ5qCH5Zyo6K+l5Yy65Z2X77yM5YiZ6K6h566X5pyA57uI5YWJ5qCH55qE5L2N572uXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEN1cnNvckNoID0gb2Zmc2V0ICsgY3Vyc29yUmVsYXRpdmVJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvcm11bGEuMyDlj5jph4/mm7TmlrBcclxuICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS5mb3JtdWxhO1xyXG4gICAgICAgICAgICAgICAgcHJldlRleHRFbmRXaXRoU3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gMy4yLjQg5aSE55CG6KGM5YaF6ZO+5o6l55qE6YOo5YiGXHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgLy8gTGluay4xIOagueaNruWJjeS4gOWMuuWdl+exu+Wei+WSjHNldHRpbmdz5re75Yqg56m65qC8XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgfHwgc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgfHwgc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIExpbmsuMiDlpoLmnpzor6XljLrlnZfmnInlhYnmoIfvvIzliJnorqHnrpfmnIDnu4jlhYnmoIfkvY3nva5cclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTGluay4zIOabtOaWsOWPmOmHj1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLmxpbms7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLjIuNSDlpITnkIbnlKjmiLfoh6rlrprkuYnljLrlnZfnmoTpg6jliIZcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAvLyBVc2VyLjEg5qC55o2u5YmN5LiA5Yy65Z2X57G75Z6L5ZKMc2V0dGluZ3Pmt7vliqDnqbrmoLxcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuVXNlclBhcnRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVXNlci4yIOWmguaenOivpeWMuuWdl+acieWFieagh++8jOWImeiuoeeul+acgOe7iOWFieagh+S9jee9rlxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gY3Vyc29yTGluZVBhcnRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMaW5rLjMg5pu05paw5Y+Y6YePXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUudXNlcjtcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lUGFydHMubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihsaW5lUGFydHNbaV0udHlwZSA9PT0gSW5saW5lVHlwZS50ZXh0ICYmIGxpbmVQYXJ0c1tpXS5jb250ZW50IT1saW5lUGFydHNPcmlnaW5baV0uY29udGVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBsaW5lUGFydHNbaV0uY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzT3JpZ2luW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzT3JpZ2luW2ldLmVuZCxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IGxpbmVQYXJ0c09yaWdpbltpXS5jb250ZW50XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5saW5lQ2hhbmdlTGlzdCA9IGlubGluZUNoYW5nZUxpc3Quc29ydCgoYSwgYik6bnVtYmVyPT5hLmJlZ2luLWIuYmVnaW4pO1xyXG4gICAgcmV0dXJuIFtyZXN1bHRMaW5lLCByZXN1bHRDdXJzb3JDaCwgaW5saW5lQ2hhbmdlTGlzdF07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVhc3lUeXBpbmdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBGb3JtYXRTZXR0aW5ncztcclxuXHRrZXlDdHJsRmxhZzogYm9vbGVhbjtcclxuXHRrZXlTZXROb3RVcGRhdGU6IFNldDxzdHJpbmc+O1xyXG5cdGlucHV0Q2hpbmVzZUZsYWc6IGJvb2xlYW47XHJcbiAgICBwcmV2Q3Vyc29yOiBDb2RlTWlycm9yLlBvc2l0aW9uO1xyXG4gICAgbGluZVR5cGVBcnJheTogQXJ0aWNsZVBhcnRbXTtcclxuICAgIGNoZWNrTGluZVR5cGU6IGJvb2xlYW47XHJcbiAgICBwcmV2TGluZUNvdW50OiBudW1iZXI7XHJcbiAgICBwcmV2TGluZVR5cGU6IExpbmVUeXBlO1xyXG4gICAgXHJcbiAgICBzZWxlY3RlZEZvcm1hdFJhbmdlOkNvZGVNaXJyb3IuUmFuZ2U7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdsb2FkaW5nIHBsdWdpbu+8mkVhc3kgVHlwaW5nJyk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHR0aGlzLmtleUN0cmxGbGFnID0gZmFsc2U7XHJcblx0XHR0aGlzLmlucHV0Q2hpbmVzZUZsYWcgPSBmYWxzZTtcclxuXHRcdHRoaXMua2V5U2V0Tm90VXBkYXRlID0gbmV3IFNldChbJ0NvbnRyb2wnLCAnVGFiJywgJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ0FsdCcsICdCYWNrc3BhY2UnLCAnRXNjYXBlJywgJ0RlbGV0ZScsICdOdW1Mb2NrJ10pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHRoaXMucHJldlBvc2l0aW9uID0ge3R5cGU6TGluZVR5cGUubm9uZSwgbGluZTowLCBjaDowfTtcclxuICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSB7bGluZTowLCBjaDowfTtcclxuICAgICAgICB0aGlzLnByZXZMaW5lVHlwZSA9IExpbmVUeXBlLm5vbmU7XHJcbiAgICAgICAgdGhpcy5wcmV2TGluZUNvdW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxpbmVUeXBlQXJyYXkgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2hlY2tMaW5lVHlwZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZvcm1hdFJhbmdlID0gbnVsbDtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJlYXN5LXR5cGluZy1mb3JtYXQtbGluZVwiLFxyXG5cdFx0XHRuYW1lOiBcImZvcm1hdCBjdXJyZW50IGxpbmVcIixcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMuY29tbWFuZEZvcm1hdExpbmUoKSxcclxuXHRcdFx0aG90a2V5czogW3tcclxuXHRcdFx0XHRtb2RpZmllcnM6IFsnU2hpZnQnXSxcclxuXHRcdFx0XHRrZXk6IFwidGFiXCJcclxuXHRcdFx0fV0sXHJcblx0XHR9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiZWFzeS10eXBpbmctZm9ybWF0LWxpbmVcIixcclxuXHRcdFx0bmFtZTogXCJzd2l0Y2ggYXV0b2Zvcm1hdFwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5jb21tYW5kU3dpdGNoKCksXHJcblx0XHRcdGhvdGtleXM6IFt7XHJcblx0XHRcdFx0bW9kaWZpZXJzOiBbJ0N0cmwnXSxcclxuXHRcdFx0XHRrZXk6IFwidGFiXCJcclxuXHRcdFx0fV0sXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJlYXN5LXR5cGluZy1mb3JtYXQtbm90ZVwiLFxyXG5cdFx0XHRuYW1lOiBcImZvcm1hdCBjdXJyZW50IG5vdGVcIixcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMuY29tbWFuZEZvcm1hdE5vdGUoKSxcclxuXHRcdFx0aG90a2V5czogW3tcclxuXHRcdFx0XHRtb2RpZmllcnM6IFsnQWx0J10sXHJcblx0XHRcdFx0a2V5OiBcImZcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1x0XHRcclxuXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVhc3lUeXBpbmdTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckNvZGVNaXJyb3IoKGNvZGVNaXJyb3JFZGl0b3I6IENvZGVNaXJyb3IuRWRpdG9yKSA9PiB7XHJcblx0XHRcdGNvZGVNaXJyb3JFZGl0b3Iub24oJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcCk7XHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3JFZGl0b3Iub24oJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24pO1xyXG4gICAgICAgICAgICBjb2RlTWlycm9yRWRpdG9yLm9uKCdiZWZvcmVDaGFuZ2UnLCB0aGlzLmJlZm9yZUNoYW5nZSk7XHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG5cclxuICAgIGJlZm9yZUNoYW5nZSA9IChlZGl0b3I6Q29kZU1pcnJvci5FZGl0b3IsIG9iajogQ29kZU1pcnJvci5FZGl0b3JDaGFuZ2VDYW5jZWxsYWJsZSk9PlxyXG4gICAge1xyXG4gICAgICAgIGlmKCF0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nKSByZXR1cm47XHJcbiAgICAgICAgbGV0IHN5bWJvbCA9IG9iai50ZXh0WzBdO1xyXG4gICAgICAgIGxldCByZXBsYWNlU3ltYm9sOnN0cmluZztcclxuXHJcbiAgICAgICAgbGV0IHJlZyA9IC9bLVxcYFxcJF0vO1xyXG4gICAgICAgIGlmKHJlZy50ZXN0KHN5bWJvbCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrTGluZVR5cGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkgJiYgdGhpcy5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5zZXR0aW5ncy5EZWJ1ZykgY29uc29sZS5sb2coJ2JlZm9yZSBjaGFuZ2U6IHN5bWJvbDonLCBzeW1ib2wpO1xyXG4gICAgICAgICAgICBzd2l0Y2goc3ltYm9sKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICfvv6UnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VTeW1ib2wgPSAnJCQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGb3JtYXRSYW5nZSA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnwrcnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VTeW1ib2wgPSAnYGAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn44CQJzpcclxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlU3ltYm9sID0gJ1tdJ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGb3JtYXRSYW5nZSA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VUZXh0ID0gcmVwbGFjZVN5bWJvbC5jaGFyQXQoMCkgK3NlbGVjdGVkKyByZXBsYWNlU3ltYm9sLmNoYXJBdCgxKTtcclxuXHJcbiAgICAgICAgICAgIG9iai51cGRhdGUobnVsbCwgbnVsbCwgW3JlcGxhY2VUZXh0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoIWVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpICYmIHRoaXMuc2V0dGluZ3MuRnVsbFdpZHRoQ2hhcmFjdGVyRW5oZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaChzeW1ib2wpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ+KApuKApic6XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnVwZGF0ZShudWxsLCBudWxsLCBbJ14nXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZygndW5sb2FkaW5nIHBsdWdpbicpO1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQ29kZU1pcnJvcnMoKGNvZGVNaXJyb3JFZGl0b3I6IENvZGVNaXJyb3IuRWRpdG9yKSA9PiB7XHJcblx0XHRcdGNvZGVNaXJyb3JFZGl0b3Iub2ZmKCdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXApO1xyXG4gICAgICAgICAgICBjb2RlTWlycm9yRWRpdG9yLm9mZigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3JFZGl0b3Iub2ZmKCdiZWZvcmVDaGFuZ2UnLCB0aGlzLmJlZm9yZUNoYW5nZSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cclxuICAgIGNvbW1hbmRTd2l0Y2goKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmcgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPyBmYWxzZTp0cnVlO1xyXG4gICAgICAgIGxldCBzdGF0dXMgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPydvbic6J29mZic7XHJcbiAgICAgICAgbmV3IE5vdGljZSgnQXV0b2Zvcm1hdCBpcyAnKyBzdGF0dXMgKychJyk7XHJcbiAgICB9XHJcblxyXG5cdGNvbW1hbmRGb3JtYXROb3RlKClcclxuXHR7XHJcblx0XHRsZXQgYWN0aXZlTGVhZjogYW55ID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XHJcblx0XHRsZXQgZWRpdG9yID0gYWN0aXZlTGVhZi52aWV3LnNvdXJjZU1vZGUuY21FZGl0b3IgYXMgQ29kZU1pcnJvci5FZGl0b3I7XHJcblx0XHRsZXQgdHlwZUFycmF5ID0gc3BsaXRBcnRpY2xlKGVkaXRvci5nZXRWYWx1ZSgpKTtcclxuICAgICAgICBmb3IobGV0IGk9MDsgaTx0eXBlQXJyYXkubGVuZ3RoO2krKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHR5cGVBcnJheVtpXS50eXBlPT09TGluZVR5cGUudGV4dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqPXR5cGVBcnJheVtpXS5iZWdpbjsgajx0eXBlQXJyYXlbaV0uZW5kO2orKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGVkaXRvci5nZXRMaW5lKGopO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdMaW5lID0gZm9ybWF0TGluZShsaW5lLCBsaW5lLmxlbmd0aCwgdGhpcy5zZXR0aW5ncylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3TGluZSE9bGluZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydDogQ29kZU1pcnJvci5Qb3NpdGlvbiA9IHtsaW5lOmosIGNoOjB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kOiBDb2RlTWlycm9yLlBvc2l0aW9uID0ge2xpbmU6aiwgY2g6bGluZS5sZW5ndGh9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBuZXcgTm90aWNlKCdGb3JtYXQgTm90ZSBEb25lIScpO1xyXG5cdH1cclxuXHRjb21tYW5kRm9ybWF0TGluZSgpXHJcblx0e1xyXG5cdFx0bGV0IGFjdGl2ZUxlYWY6IGFueSA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xyXG5cdFx0bGV0IGVkaXRvciA9IGFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yIGFzIENvZGVNaXJyb3IuRWRpdG9yO1xyXG5cdFx0bGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGxldCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xyXG5cdFx0bGV0IHJldCA9IGZvcm1hdExpbmUobGluZSwgY3Vyc29yLmNoLCB0aGlzLnNldHRpbmdzKTtcclxuXHRcdGlmKHJldFswXSE9ZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpKVxyXG5cdFx0e1xyXG5cdFx0XHRsZXQgbGluZVN0YXJ0OkNvZGVNaXJyb3IuUG9zaXRpb24gPSB7Y2g6MCwgbGluZTpjdXJzb3IubGluZX07XHJcblx0XHRcdGxldCBsaW5lRW5kOiBDb2RlTWlycm9yLlBvc2l0aW9uID0ge2NoOmxpbmUubGVuZ3RoLCBsaW5lOmN1cnNvci5saW5lfTtcclxuXHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZShyZXRbMF0sIGxpbmVTdGFydCwgbGluZUVuZCk7XHJcblx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe1xyXG5cdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxyXG5cdFx0XHRcdGNoOiByZXRbMV1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZUtleURvd24gPSAoZWRpdG9yOiBDb2RlTWlycm9yLkVkaXRvciwgZXZlbnQ6IEtleWJvYXJkRXZlbnQpOnZvaWQgPT5cclxuXHR7XHJcbiAgICAgICAgaWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09JylcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2tleWRvd246JywgZXZlbnQua2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nKSByZXR1cm47XHJcblx0XHRcclxuXHRcdGlmKGV2ZW50LmtleSA9PT0gJ1Byb2Nlc3MnKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmlucHV0Q2hpbmVzZUZsYWcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYoZXZlbnQua2V5ID09PSAnQ29udHJvbCcpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMua2V5Q3RybEZsYWcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVLZXlVcD0oZWRpdG9yOiBDb2RlTWlycm9yLkVkaXRvciwgZXZlbnQ6IEtleWJvYXJkRXZlbnQpOnZvaWQgPT5cclxuXHR7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PScpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrZXl1cDonLCBldmVudC5rZXkpO1xyXG5cclxuICAgICAgICAgICAgaWYoZXZlbnQua2V5ID09PSAnRjQnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlc3QgQmVnaW49PT09PT09PT09PT09PT09PT09PT09PT1cIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGVzdCBFbmQ9PT09PT09PT09PT09PT09PT09PT09PT1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZih0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPT09ZmFsc2UpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgLy8gc2VsZWN0Rm9ybWF0XHJcbiAgICAgICAgaWYodGhpcy5zZWxlY3RlZEZvcm1hdFJhbmdlIT1udWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkU3RhcnQgPSB0aGlzLnNlbGVjdGVkRm9ybWF0UmFuZ2UuZnJvbSgpO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRFbmQgPSB0aGlzLnNlbGVjdGVkRm9ybWF0UmFuZ2UudG8oKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRTdGFydC5jaCArPSAxO1xyXG4gICAgICAgICAgICBzZWxlY3RlZEVuZC5jaCArPSAxO1xyXG4gICAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKHNlbGVjdGVkU3RhcnQsIHNlbGVjdGVkRW5kKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZvcm1hdFJhbmdlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBpZih0aGlzLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICBsZXQgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCB0d29DaGFyYWN0ZXJzTmVhckN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbGV0IGNoYXJhY3RlcjJjdXJzb3IxID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgdHdvQ2hhcmFjdGVyc0FmdGVyQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMn1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc3dpdGNoKGV2ZW50LmtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnJCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICfvv6UnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICfvv6Xvv6UnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaGFyYWN0ZXIyY3Vyc29yMT09PSck77+lJCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoY3Vyc29yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1snOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAn44CQJzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnW1snICYmIHR3b0NoYXJhY3RlcnNBZnRlckN1cnNvciE9J11dJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnW1tdXScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdgJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ8K3JzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnwrfCtycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2BgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGNoYXJhY3RlcjJjdXJzb3IxPT09J2DCt2AnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0aWYoZXZlbnQua2V5ID09PSAnQ29udHJvbCcpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMua2V5Q3RybEZsYWcgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYodGhpcy5rZXlDdHJsRmxhZyAmJiBldmVudC5rZXkgPT09ICd6JylcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKHRoaXMua2V5U2V0Tm90VXBkYXRlLmhhcyhldmVudC5rZXkpKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRcclxuXHJcblx0XHRpZih0aGlzLmlucHV0Q2hpbmVzZUZsYWcpXHJcblx0XHR7XHJcblx0XHRcdC8vIHdpbmRvd3PkuIvliKTmlq3kuK3mlofovpPlhaXnmoTnu5PmnZ/ngrnvvIzmo4DmtYvliLDmlbDlrZfmiJbogIXnqbrmoLzlsLHmmK/ovpPlhaXkuK3mlofnu5PmnZ/vvIxTaGlmdOaYr+S4reaWh+i+k+WFpeazlei+k+WFpeiLseaWh+OAglxyXG5cdFx0XHQvLyDljLnphY0sLjsnPD7mmK/kuK3mlofovpPlhaXms5XnmoTlhajop5LlrZfnrKbvvIzjgILvvJvigJjigJnjgIrjgItcclxuXHRcdFx0aWYoZXZlbnQua2V5Lm1hdGNoKC9bMC05ICwuOzw+OidgXFxcXFxcL10vZ2kpIT1udWxsIHx8IGV2ZW50LmtleT09PSdTaGlmdCcpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcImNoaW5lc2UgaW5wdXQgZG9uZSFcIik7XHJcblx0XHRcdFx0dGhpcy5pbnB1dENoaW5lc2VGbGFnID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGxldCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xyXG4gICAgICAgIGxldCB0aGlzTGluZVR5cGU6TGluZVR5cGU7XHJcblxyXG4gICAgICAgIC8vIOWcqOaWh+aho+ihjOaVsOWPmOWMluaXtu+8jOaIluiAhWNoZWNrTGluZVR5cGXkuLrnnJ/ml7bvvIzph43mlrAgcGFyc2UgYXJ0aWNsZVxyXG4gICAgICAgIGlmKHRoaXMuY2hlY2tMaW5lVHlwZSB8fCB0aGlzLnByZXZMaW5lQ291bnQhPWVkaXRvci5saW5lQ291bnQoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIG5ldyBOb3RpY2UoJ3JlcGFyc2UgYXJ0aWNsZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVUeXBlQXJyYXkgPSBzcGxpdEFydGljbGUoZWRpdG9yLmdldFZhbHVlKCkpO1xyXG4gICAgICAgICAgICB0aGlzTGluZVR5cGUgPSBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMoY3Vyc29yLmxpbmUsIHRoaXMubGluZVR5cGVBcnJheSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkxpbmVUeXBlID0gdGhpc0xpbmVUeXBlO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZMaW5lQ291bnQgPSBlZGl0b3IubGluZUNvdW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tMaW5lVHlwZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWcqOWFtuS7luihjOe8lui+keeahOaXtuWAme+8jOmcgOimgeWFiOiOt+WPluS4i+ihjOeahOexu+Wei1xyXG4gICAgICAgIGVsc2UgaWYoY3Vyc29yLmxpbmUgIT0gdGhpcy5wcmV2Q3Vyc29yLmxpbmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzTGluZVR5cGUgPSBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMoY3Vyc29yLmxpbmUsIHRoaXMubGluZVR5cGVBcnJheSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkxpbmVUeXBlID0gdGhpc0xpbmVUeXBlO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXNMaW5lVHlwZSA9IHRoaXMucHJldkxpbmVUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpc0xpbmVUeXBlIT1MaW5lVHlwZS50ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRsZXQgcmV0ID0gZm9ybWF0TGluZShsaW5lLCBjdXJzb3IuY2gsIHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxpbmUpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmV0KVxyXG4gICAgICAgIGxldCBpbmxpbmVDaGFuZ2VMaXN0ID0gcmV0WzJdO1xyXG4gICAgICAgIGlmKGlubGluZUNoYW5nZUxpc3QubGVuZ3RoICE9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxpbmxpbmVDaGFuZ2VMaXN0Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VCZWdpbjpDb2RlTWlycm9yLlBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBpbmxpbmVDaGFuZ2VMaXN0W2ldLmJlZ2luK29mZnNldFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZUVuZDpDb2RlTWlycm9yLlBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBpbmxpbmVDaGFuZ2VMaXN0W2ldLmVuZCtvZmZzZXRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBpbmxpbmVDaGFuZ2VMaXN0W2ldLnRleHQubGVuZ3RoIC0gaW5saW5lQ2hhbmdlTGlzdFtpXS5vcmlnaW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShpbmxpbmVDaGFuZ2VMaXN0W2ldLnRleHQsIGNoYW5nZUJlZ2luLCBjaGFuZ2VFbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe1xyXG5cdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxyXG5cdFx0XHRcdGNoOiByZXRbMV1cclxuXHRcdFx0fSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkN1cnNvciA9IHtcclxuXHRcdFx0XHRsaW5lOiBjdXJzb3IubGluZSxcclxuXHRcdFx0XHRjaDogcmV0WzFdXHJcblx0XHRcdH07XHJcblx0XHRcdGVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEVhc3lUeXBpbmdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBFYXN5VHlwaW5nUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFYXN5VHlwaW5nUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1NldHRpbmdzIGZvciBFYXN5IFR5cGluZy4nfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdhJywge3RleHQ6ICdNb3JlIGRldGFpbCBpcyBpbiBHaXRodWI6IGVhc3ktdHlwaW5nLW9ic2lkaWFuJywgaHJlZjonaHR0cHM6Ly9naXRodWIuY29tL1lhb3podXdhL2Vhc3ktdHlwaW5nLW9ic2lkaWFuJ30pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICfmgLvlvIDlhbMgKE1hc3RlciBTd2l0Y2gpJ30pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJBdXRvIGZvcm1hdHRpbmdcIilcclxuXHRcdC5zZXREZXNjKFwi5piv5ZCm5Zyo57yW6L6R5paH5qGj5pe26Ieq5Yqo5qC85byP5YyW5paH5pysXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZylcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZyA9IHZhbHVlO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiQXV0b0Zvcm1hdHRpbmc6XCIsdmFsdWUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAn6K+m57uG6KeE5YiZ5byA5YWzIChTdWIgU3dpdGNoZXMpJ30pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIENoaW5lc2UgYW5kIEVuZ2xpc2gvbnVtYmVyXCIpXHJcblx0XHQuc2V0RGVzYyhcIuWcqOS4reaWh+WSjOiLseaWhy/mlbDlrZfpl7TnqbrmoLxcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VFbmdsaXNoU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5DaGluZXNlRW5nbGlzaFNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkRlbGV0ZSB0aGUgU3BhY2UgYmV0d2VlbiBDaGluZXNlIGNoYXJhY3RlcnNcIilcclxuXHRcdC5zZXREZXNjKFwi5Zyo5Lit5paH5a2X56ym6Ze05Y676Zmk56m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5DaGluZXNlTm9TcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VOb1NwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gRW5nbGlzaCB3aXRoIHB1bmN0dWF0ZVwiKVxyXG5cdFx0LnNldERlc2MoXCLlnKjoi7HmlofmlofmnKzlkozmoIfngrnpl7TnqbrmoLxcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkVuZ2xpc2hTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkVuZ2xpc2hTcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJDYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgZXZlcnkgc2VudGVuY2VcIilcclxuXHRcdC5zZXREZXNjKFwi6Iux5paH5q+P5Liq5Y+l6aaW5a2X5q+N5aSn5YaZXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5DYXBpdGFsaXphdGlvbikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkNhcGl0YWxpemF0aW9uID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gbnVtYmVyIGFuZCBFbmdsaXNoIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwi5pWw5a2X5ZKM5qCH54K56Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5OdW1iZXJTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLk51bWJlclNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gRW5nbGlzaCBicmFjZXMgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwi5Zyo6Iux5paH5bCP5ous5Y+35ZKM5paH5pys6Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5CcmFjZVNwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQnJhY2VTcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIGlubGluZSBjb2RlIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIuWcqCBg6KGM5YaF5Luj56CBYCDlkozmlofmnKzpl7TnqbrmoLxcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLklubGluZUNvZGVTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLklubGluZUNvZGVTcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIGlubGluZSBmb3JtdWxhIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIuWcqCAk6KGM5YaF5YWs5byPJCDlkozmlofmnKzpl7TnqbrmoLxcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIGxpbmsgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwi5ZyoIFtbd2lraWxpbmtdXSBtZGxpbmsg5ZKM5paH5pys6Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5MaW5rU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5MaW5rU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkZ1bGwtV2lkdGggc3ltYm9sIGlucHV0IGVuaGFuY2VtZW50XCIpXHJcblx0XHQuc2V0RGVzYyhcIuWFqOinkuespuWPt+i+k+WFpeWinuW8ulwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuRnVsbFdpZHRoQ2hhcmFjdGVyRW5oZW5jZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gVXNlciBEZWZpbmVkIFBhcnQoc2VsZWN0ZWQgYnkgUmVnRXhwKSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCLlnKjnlKjmiLfoh6rlrprkuYnljLrlnZco5q2j5YiZ6KGo6L6+5byP6YCJ5oupKeWSjOaWh+acrOS5i+mXtOepuuagvFwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlclBhcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlVzZXIgRGVmaW5lZCBSZWdFeHAgU3dpdGNoXCIpXHJcblx0XHQuc2V0RGVzYyhcIuiHquWumuS5ieato+WImeihqOi+vuW8j+W8gOWFs++8jOWMuemFjeWIsOeahOWGheWuueS4jei/m+ihjOagvOW8j+WMllwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlckRlZmluZWRSZWdTd2l0Y2gpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ1N3aXRjaCA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiVXNlciBkZWZpbmVkIFJlZ0V4cCB0byBpZ25vcmUsIG9uZSBleHByZXNzaW9uIHBlciBsaW5lXCIpXHJcblx0XHQuc2V0RGVzYyhcIueUqOaIt+iHquWumuS5ieato+WImeihqOi+vuW8j++8jOWMuemFjeWIsOeahOWGheWuueS4jei/m+ihjOagvOW8j+WMlu+8jOavj+ihjOS4gOS4quihqOi+vuW8j++8jOihjOWwvuS4jeimgemaj+aEj+WKoOepuuagvFwiKVxyXG5cdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxyXG5cdFx0XHR0ZXh0XHJcblx0XHRcdC5zZXRQbGFjZWhvbGRlcignOlxcXFx3KjpcXG57ey4qP319JylcclxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwKVxyXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlckRlZmluZWRSZWdFeHAgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMucGx1Z2luLnNldHRpbmdzLkRlYnVnKSBjb25zb2xlLmxvZyhcInJlZ0V4cCBjaGFuZ2VkOlwiLCB2YWx1ZSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHt0ZXh0OiAnUmVnRXhwOiDmraPliJnooajovr7lvI8nLCBocmVmOidodHRwczovL2phdmFzY3JpcHQucnVhbnlpZmVuZy5jb20vc3RkbGliL3JlZ2V4cC5odG1sIyd9KTtcclxuXHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnRGVidWcnfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlByaW50IGRlYnVnIGluZm8gaW4gY29uc29sZVwiKVxyXG5cdFx0LnNldERlc2MoXCLlnKjmjqfliLblj7DovpPlh7rosIPor5Xkv6Hmga9cIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkRlYnVnKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuRGVidWcgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQbHVnaW4iLCJOb3RpY2UiLCJQbHVnaW5TZXR0aW5nVGFiIiwiU2V0dGluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXVEQTtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMvRCxRQUFRLFNBQVMsU0FBUyxD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
